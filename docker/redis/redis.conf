# Redis configuration for Talent Radar
# Security configurations

# Require password authentication
requirepass ${REDIS_PASSWORD:-dev_redis_password_change_in_production}

# Enable protected mode - reject connections from other IPs if no password is set
protected-mode yes

# Bind to all interfaces but require password
bind 0.0.0.0

# Port configuration
port 6379

# Disable dangerous commands in production
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command KEYS ""
rename-command CONFIG ""
rename-command SHUTDOWN SHUTDOWN_a7b2c3d4e5f6

# Memory and persistence
maxmemory 256mb
maxmemory-policy allkeys-lru

# Persistence configuration
save 900 1
save 300 10
save 60 10000

# Logging
loglevel notice
logfile /var/log/redis/redis-server.log

# Security: disable client list commands
rename-command CLIENT ""

# Timeout idle clients after 300 seconds
timeout 300

# TCP keepalive
tcp-keepalive 60

# Maximum number of clients
maxclients 100